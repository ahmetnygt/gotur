if !tickets.length
  .placeholder-container
    p.text-muted.mb-0= emptyMessage
else
  .find-ticket-results-list
    each ticket in tickets
      article.find-ticket-result-item(
        data-ticket-item
        data-ticket-pnr=ticket.pnr || ''
        data-ticket-firm-key=ticket.firmKey || ''
        data-ticket-passenger=ticket.passenger.fullName || ''
        data-ticket-from=ticket.trip.fromTitle || ''
        data-ticket-to=ticket.trip.toTitle || ''
        data-ticket-trip-date=ticket.trip.tripDate || ''
        data-ticket-trip-time=ticket.trip.tripTime || ''
        data-ticket-seat=ticket.seatNo || ''
      )
        .ticket-header
          .ticket-header-main
            .firm-logo
              img(src=`/images/${ticket.firmKey}.png` alt="" srcset="")
            .ticket-passenger
              .ticket-passenger-item
                .label Passenger
                .value= ticket.passenger.fullName || "-"
              .ticket-passenger-item
                .label Phone
                .value= ticket.phoneNumber || "-"
              .ticket-passenger-item
                .label Email
                .value= ticket.contactEmail || "-"
          .ticket-header-controls
            .pnr-badge= ticket.pnr || "NO PNR"
            if ticket.status !== "refund" && ticket.status !== "canceled"
              .ticket-actions.dropdown
                button.btn.btn-ticket-actions(type='button', id=`ticket-actions-${ticket.id}` data-bs-toggle='dropdown' aria-expanded='false' aria-label='Ticket actions menu')
                  i.fa-solid.fa-ellipsis-vertical
                .dropdown-menu.dropdown-menu-end(aria-labelledby=`ticket-actions-${ticket.id}`)
                  button.dropdown-item(type='button' data-ticket-cancel-trigger) Cancel Ticket
        .ticket-body
          .ticket-body-item
            .label Departure
            .value= ticket.trip.fromTitle || "-"
          .ticket-body-item
            .label Arrival
            .value= ticket.trip.toTitle || "-"
          .ticket-body-item
            .label Travel Date
            .value= ticket.trip.tripDate || "-"
          .ticket-body-item
            .label Travel Time
            .value= ticket.trip.tripTime || "-"
          .ticket-body-item
            .label Seat
            .value= ticket.seatNo || "-"
        .ticket-footer
          if ticket.statusLabel
            span.status-badge(class=ticket.statusClass data-ticket-status-label)= ticket.statusLabel
          span.meta-item
            i.fa-regular.fa-calendar
            span= ticket.createdAtText || "Created date unknown"
  #ticketCancelPopup.auth-popup.ticket-cancel-popup(aria-hidden='true')
    .auth-popup__overlay(data-ticket-cancel-close)
    .auth-popup__dialog(role='dialog' aria-modal='true' aria-labelledby='ticketCancelTitle')
      .auth-popup__header.gtr-modal-header
        h5#ticketCancelTitle.auth-popup__title Ticket Cancellation
        button.btn-close(type='button' aria-label='Close' data-ticket-cancel-close)
      .auth-popup__body
        .ticket-cancel-popup__summary
          dl.ticket-cancel-popup__details
            div
              dt PNR
              dd(data-ticket-detail='pnr')
            div
              dt Passenger
              dd(data-ticket-detail='passenger')
            div
              dt Route
              dd
                span(data-ticket-detail='from')
                |  → 
                span(data-ticket-detail='to')
            div
              dt Travel Date
              dd
                span(data-ticket-detail='date')
                |  • 
                span(data-ticket-detail='time')
            div
              dt Seat
              dd(data-ticket-detail='seat')
        .ticket-cancel-popup__verification
          button.btn.btn-primary(type='button' data-ticket-send-code) Send Verification Code
          button.btn.btn-link.p-0.ms-3(type='button' data-ticket-resend-code disabled) Resend Code
          span.ticket-cancel-popup__countdown(data-ticket-countdown)
        .ticket-cancel-popup__feedback
          .alert.ticket-cancel-popup__message(role='alert' aria-live='polite' data-ticket-message)
        .ticket-cancel-popup__input
          label.form-label(for='ticketCancelCodeInput') Verification Code
          input#ticketCancelCodeInput.form-control(type='text' inputmode='numeric' autocomplete='one-time-code' placeholder='6-digit code' data-ticket-code-input)
      .auth-popup__footer
        button.btn.btn-outline-secondary(type='button' data-ticket-cancel-close) Never mind
        button.btn.btn-danger(type='button' data-ticket-confirm-cancel) Confirm Cancellation